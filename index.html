<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>Budget Tracker</title>

<style>
html, body {
    margin:0;
    padding:0;
    background:#0a0e1a;
    color:#fff;
    font-family:-apple-system, BlinkMacSystemFont, sans-serif;
    overflow-x:hidden;
}

body {
    padding-bottom: env(safe-area-inset-bottom);
}

.container {
    padding:20px 16px;
}

.header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
}

h1 { font-size:22px; }

button { cursor:pointer; }

.fab {
    position:fixed;
    bottom:30px;
    right:20px;
    width:60px;
    height:60px;
    border-radius:50%;
    background:#3b82f6;
    color:white;
    border:none;
    font-size:26px;
}

.modal {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    align-items:flex-end;
}

.modal.active { display:flex; }

.modal-content {
    background:#151b2d;
    width:100%;
    max-height:90vh;
    overflow-y:auto;
    overflow-x:hidden;
    border-radius:20px 20px 0 0;
    padding:20px;
}

input, select {
    width:100%;
    padding:14px;
    margin-bottom:10px;
    background:#1f263d;
    border:none;
    color:white;
    border-radius:10px;
}

.quick-amounts {
    display:flex;
    gap:6px;
    flex-wrap:wrap;
    margin-bottom:10px;
}

.quick-amounts button {
    background:#2a3355;
    border:none;
    padding:8px 10px;
    border-radius:8px;
    color:#fff;
    font-size:12px;
}

.category-row {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:6px;
    background:#1f263d;
    padding:8px;
    border-radius:8px;
}

.delete-btn {
    background:#f87171;
    border:none;
    color:white;
    border-radius:6px;
    padding:4px 6px;
}
</style>
</head>

<body>

<div class="container">
<div class="header">
<h1>üí∞ Budget</h1>
<button onclick="openSettings()">‚öôÔ∏è</button>
</div>

<div id="transactions"></div>
</div>

<button class="fab" onclick="openAdd()">‚ûï</button>

<!-- Add Modal -->
<div class="modal" id="addModal">
<div class="modal-content">
<h2>–ù–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</h2>

<div>
<button onclick="selectType('expense')" id="expenseBtn">‚ûñ –†–∞—Å—Ö–æ–¥</button>
<button onclick="selectType('income')" id="incomeBtn">‚ûï –î–æ—Ö–æ–¥</button>
</div>

<input type="number" id="amount" placeholder="–°—É–º–º–∞">

<div class="quick-amounts" id="quickAmounts"></div>

<select id="category"></select>

<input type="date" id="date">

<button onclick="saveTransaction()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
<button onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
</div>
</div>

<!-- Settings -->
<div class="modal" id="settingsModal">
<div class="modal-content">
<h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
<div id="categoryList"></div>
<button onclick="closeSettings()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<script>
let appData = {
transactions:[],
categories:[
{id:'food',name:'–ï–¥–∞',type:'expense'},
{id:'salary',name:'–ó–∞—Ä–ø–ª–∞—Ç–∞',type:'income'}
],
currentType:'expense'
};

function openAdd(){
document.getElementById('addModal').classList.add('active');
selectType('expense');
document.getElementById('date').value=new Date().toISOString().slice(0,10);
renderCategories();
}

function closeModal(){
document.getElementById('addModal').classList.remove('active');
}

function selectType(type){
appData.currentType=type;
}

function renderCategories(){
const select=document.getElementById('category');
select.innerHTML='';
appData.categories
.filter(c=>c.type===appData.currentType)
.forEach(c=>{
let o=document.createElement('option');
o.value=c.id;
o.textContent=c.name;
select.appendChild(o);
});
}

document.getElementById('amount').addEventListener('input',function(){
let val=this.value;
const container=document.getElementById('quickAmounts');
container.innerHTML='';
if(!val) return;
let base=parseInt(val);
[10000,100000,1000000,10000000].forEach(mult=>{
let btn=document.createElement('button');
btn.textContent=(base*mult).toLocaleString();
btn.onclick=()=>{document.getElementById('amount').value=base*mult;}
container.appendChild(btn);
});
});

function saveTransaction(){
let t={
id:Date.now(),
type:appData.currentType,
amount:parseFloat(document.getElementById('amount').value),
category:document.getElementById('category').value,
date:document.getElementById('date').value
};
appData.transactions.push(t);
closeModal();
renderTransactions();
}

function renderTransactions(){
let c=document.getElementById('transactions');
c.innerHTML='';
appData.transactions.forEach(t=>{
let cat=appData.categories.find(x=>x.id===t.category);
let div=document.createElement('div');
div.textContent=(cat?cat.name:'–£–¥–∞–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è')+' ‚Äî '+t.amount;
c.appendChild(div);
});
}

function openSettings(){
document.getElementById('settingsModal').classList.add('active');
renderCategoryList();
}

function closeSettings(){
document.getElementById('settingsModal').classList.remove('active');
}

function renderCategoryList(){
let container=document.getElementById('categoryList');
container.innerHTML='';
appData.categories.forEach(cat=>{
let row=document.createElement('div');
row.className='category-row';
row.innerHTML=`<span>${cat.name}</span>`;
let btn=document.createElement('button');
btn.textContent='üóë';
btn.className='delete-btn';
btn.onclick=()=>deleteCategory(cat.id);
row.appendChild(btn);
container.appendChild(row);
});
}

function deleteCategory(id){
appData.categories=appData.categories.filter(c=>c.id!==id);
renderCategoryList();
renderTransactions();
}
</script>

</body>
</html>
